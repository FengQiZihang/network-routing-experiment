/----- No.1 配置路由器的物理接口的IP地址 ----/
--R1--
system-view
undo info-center enable
sysname R1
interface GigabitEthernet0/0/0
 ip address 10.1.2.1 24
interface LoopBack0
 ip address 10.1.1.1 24
interface LoopBack1
 ip address 10.1.4.1 24

--R2--
system-view
undo info-center enable
sysname R2
interface GigabitEthernet0/0/0
 ip address 10.1.2.2 24
interface GigabitEthernet0/0/1
 ip address 10.1.3.2 24

--R3--
system-view
undo info-center enable
sysname R3
interface GigabitEthernet0/0/0
 ip address 10.1.3.1 24

/----- No.2 配置OSPF使网络互通 ----/
--R1--
ospf 1 router-id 1.1.1.1
 area 0.0.0.0
  network 10.1.1.0 0.0.0.255
  network 10.1.2.0 0.0.0.255
  network 10.1.4.0 0.0.0.255

--R2--
ospf 1 router-id 2.2.2.2
 area 0.0.0.0
  network 10.1.2.0 0.0.0.255
  network 10.1.3.0 0.0.0.255

--R3--
ospf 1 router-id 3.3.3.3
 area 0.0.0.0
  network 10.1.3.0 0.0.0.255

--连通性测试 R3--
ping 10.1.1.1
ping 10.1.2.1
ping 10.1.4.1

/----- No.3 配置R3为Telnet服务器 ----/
--R3--
telnet server enable
user-interface vty 0 4
 authentication-mode password
 set authentication password cipher Huawei@123
 user privilege level 3

--Telnet测试 (在R1上执行)--
<R1> telnet 10.1.3.1
Input Password: Huawei@123 (密码隐藏，输入后按回车)
<R3> display users  (登录成功后查看当前用户)

/----- No.4 配置ACL进行流量过滤(二选一) ----/
配置背景：
方式一：只允许 R1-LoopBack1 (10.1.4.1) 访问 R3-Telnet。
方式二：只允许 R1-物理接口 (10.1.2.1) 访问 R3-Telnet。

--【方式一：在R3的VTY接口调用】--
--R3--
acl number 3000
 rule permit tcp source 10.1.4.0 0.0.0.255 destination 10.1.3.1 0.0.0.0 destination-port eq 23
 quit
user-interface vty 0 4
 acl 3000 inbound
 quit
display acl 3000

--【方式二：在R2的物理接口调用】--
--R2--
acl number 3000
 rule permit tcp source 10.1.2.1 0.0.0.0 destination 10.1.3.1 0.0.0.0 destination-port eq 23
 rule deny tcp source any destination 10.1.3.1 0.0.0.0 destination-port eq 23
 quit
interface GigabitEthernet0/0/0
 traffic-filter inbound acl 3000
 quit
display acl 3000

--验证命令--
方法一验证：
telnet -a 10.1.4.1 10.1.3.1 (应通)
telnet -a 10.1.1.1 10.1.3.1 (应不通)

方法二验证：
telnet -a 10.1.2.1 10.1.3.1 (应通)
telnet -a 10.1.1.1 10.1.3.1 (应不通)
telnet -a 10.1.4.1 10.1.3.1 (应不通)
